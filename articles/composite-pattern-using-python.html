
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://prakharmishra.com/theme/stylesheet/style.min.css">

    <link id="dark-theme-style" rel="stylesheet" type="text/css"
          media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)"
    href="https://prakharmishra.com/theme/stylesheet/dark-theme.min.css">

    <link id="pygments-dark-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)"
          href="https://prakharmishra.com/theme/pygments/monokai.min.css">
    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: light)"
          href="https://prakharmishra.com/theme/pygments/emacs.min.css">

    <script src="https://prakharmishra.com/theme/tipuesearch/jquery.min.js"></script>
    <script src="https://prakharmishra.com/theme/tipuesearch/tipuesearch.min.js"></script>
    <script src="https://prakharmishra.com/theme/tipuesearch/tipuesearch.min.js"></script>
    <script src="https://prakharmishra.com/theme/tipuesearch/tipuesearch_set.min.js"></script>
    <script src="https://prakharmishra.com/tipuesearch_content.js"></script>
    <link rel="stylesheet" href="https://prakharmishra.com/theme/tipuesearch/tipuesearch.min.css" />

  <link rel="stylesheet" type="text/css" href="https://prakharmishra.com/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://prakharmishra.com/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://prakharmishra.com/theme/font-awesome/css/solid.css">


    <link href="https://prakharmishra.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Prakhar Mishra Atom">

    <link href="https://prakharmishra.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Prakhar Mishra RSS">


<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-191819273-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

<meta name="author" content="Prakhar Mishra" />
<meta name="description" content="Composite pattern code implementation using python" />
<meta name="keywords" content="design-patterns, python, interviews, object-oriented-programming">


<meta property="og:site_name" content="Prakhar Mishra"/>
<meta property="og:title" content="Design Patterns - Composite Pattern Implementation Using Python"/>
<meta property="og:description" content="Composite pattern code implementation using python"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://prakharmishra.com/articles/composite-pattern-using-python.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2021-03-16 00:00:00+05:30"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://prakharmishra.com/author/prakhar-mishra.html">
<meta property="article:section" content="programming"/>
<meta property="article:tag" content="design-patterns"/>
<meta property="article:tag" content="python"/>
<meta property="article:tag" content="interviews"/>
<meta property="article:tag" content="object-oriented-programming"/>
<meta property="og:image" content="/images/prakhar.jpeg">

  <title>Prakhar Mishra &ndash; Design Patterns - Composite Pattern Implementation Using Python</title>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-8793729856692815",
      enable_page_level_ads: true
    });
  </script>
</head>
<body >
  <aside>
    <div>
      <a href="https://prakharmishra.com">
        <img src="/images/prakhar.jpeg" alt="Prakhar Mishra" title="Prakhar Mishra">
      </a>

      <h1>
        <a href="https://prakharmishra.com">Prakhar Mishra</a>
      </h1>

<p>Software Engineer</p>
        <form class="navbar-search" action="/search.html" role="search">
          <input type="text" name="q" id="tipue_search_input" placeholder="Search...">
        </form>

      <nav>
        <ul class="list">



            <li>
              <a target="_self" href="/" >Home</a>
            </li>
            <li>
              <a target="_self" href="/categories.html" >Categories</a>
            </li>
            <li>
              <a target="_self" href="/tags.html" >Tags</a>
            </li>
            <li>
              <a target="_self" href="/pages/About.html" >About</a>
            </li>
            <li>
              <a target="_self" href="/pages/Contact.html" >Contact</a>
            </li>
        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-linkedin" href="https://www.linkedin.com/in/prakhar1467-11" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
          <li>
            <a  class="sc-github" href="https://github.com/tst07" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-youtube" href="https://www.youtube.com/channel/UC4J1E1YPJy8PH0F1rnOaYfQ" target="_blank">
              <i class="fab fa-youtube"></i>
            </a>
          </li>
          <li>
            <a  class="sc-instagram" href="https://www.instagram.com/prakhar1467" target="_blank">
              <i class="fab fa-instagram"></i>
            </a>
          </li>
      </ul>
    </div>

      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-aside"
           data-ad-client="ca-pub-8793729856692815"
           data-ad-slot="1234561"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
  </aside>
  <main>

    <nav>
      <a href="https://prakharmishra.com">Home</a>

      <a href="/category/programming.html">Code</a>
      <a href="/category/life.html">Life</a>
      <a href="/category/music.html">Music</a>
      <a href="/archives.html">Archives</a>

      <a href="https://prakharmishra.com/feeds/all.atom.xml">Atom</a>

      <a href="https://prakharmishra.com/feeds/all.rss.xml">RSS</a>
    </nav>

<article class="single">
  <header>
      
    <h1 id="composite-pattern-using-python">Design Patterns - Composite Pattern Implementation Using Python</h1>
    <p>
      Posted on 3æœˆ 16 2021 in <a href="https://prakharmishra.com/category/programming.html">programming</a>

    </p>
  </header>


  <div>
    <p>Composite pattern is a structural design patt...... Pfft! I am no good with definitions and most of the time I wouldn't even remember this implementation has even a name.
But having said this, software design patterns are one of the most awesome things there in software development that show true power of object oriented programming and provide 'neat' solution
to the coding challenges. While writing code, the probability to be working on an original problem is very slim, It's almost certain that some other programmer was also faced with the same problem in 
history and they had to write the solution for that. Over time many programmers found these repeated problems and decided to generalise the solution and coding style which we now call as the great
DESIGN PATTERNS!</p>
<p>These are the language which all programmers understand to quickly catch up with each other in terms of code. </p>
<p><strong> Programmer1: </strong>  "We have implemented this using decorator pattern."</p>
<p><strong> New hired programmer: </strong> "Ohh I know that! let me check out the code and see how the use case is molded to fit in the pattern!"</p>
<p>See? Easy. After you learn a pattern, try to internalise it with thinking various use cases where it can be useful. And the first time when you see a problem where the pattern will fit and you start
coding will be a happiest gotcha moment!</p>
<p>One of my favourite design pattern is composite pattern. I have used it so many times now that finding the application of it in a problem has become so natural.
I remember when the first time I read about it, The first application that came to my mind was File System of an operation system. How in Unix based system everything starts with a '/' and continue
to grow into directories and files from there. Each directory can contain files or more directories inside. So in that sense, files are leaf nodes of file tree and directories are intermediate nodes 
which can contain leaf nodes or more directory nodes. Perfect for composite pattern!</p>
<p>Now let's get to the implementation. We will create <code>composite.py</code> file where our pattern implementation will live:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABCMeta</span><span class="p">,</span> <span class="n">abstractmethod</span>


<span class="k">class</span> <span class="nc">IFileSystem</span><span class="p">(</span><span class="n">metaclass</span> <span class="o">=</span> <span class="n">ABCMeta</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">Dir</span><span class="p">(</span><span class="n">IFileSystem</span><span class="p">):</span>
    <span class="c1"># _children = []</span>
    <span class="c1"># _name = None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dir_name</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">dir_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">operation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">:</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">operation</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">addChild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">removeChild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;No such item present&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">LeafFile</span><span class="p">(</span><span class="n">IFileSystem</span><span class="p">):</span>
    <span class="c1"># _name = None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">file_name</span>

    <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">operation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</code></pre></div>

<p>Now, Let's create a <code>main.py</code> file to make use of our design pattern:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">composite</span> <span class="kn">import</span> <span class="n">Dir</span><span class="p">,</span> <span class="n">LeafFile</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">Dir</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
    <span class="n">opt</span> <span class="o">=</span> <span class="n">Dir</span><span class="p">(</span><span class="s2">&quot;/opt&quot;</span><span class="p">)</span>
    <span class="n">opt</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">LeafFile</span><span class="p">(</span><span class="s2">&quot;myfile&quot;</span><span class="p">))</span>
    <span class="n">root</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">opt</span><span class="p">)</span>
    <span class="n">root</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">Dir</span><span class="p">(</span><span class="s2">&quot;/data&quot;</span><span class="p">))</span>
    <span class="n">root</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">Dir</span><span class="p">(</span><span class="s2">&quot;/var&quot;</span><span class="p">))</span>
    <span class="n">root</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">Dir</span><span class="p">(</span><span class="s2">&quot;/etc&quot;</span><span class="p">))</span>
    <span class="n">root</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">Dir</span><span class="p">(</span><span class="s2">&quot;/home&quot;</span><span class="p">))</span>

    <span class="n">opt</span><span class="o">.</span><span class="n">operation</span><span class="p">()</span>
</code></pre></div>

<p>This was my implementation of linux file tree using python, Try to run this on your machine and do tweaks and extensions as per your imagination.
I will see you in the next one!</p>
<p><strong> Related Links </strong></p>
<p><a href="https://prakharmishra.com/articles/articles/composite-pattern-using-cpp.html#composite-pattern-using-cpp">Design Patterns - Composite Pattern Implementation Using C++</a></p>
<hr>
<p><strong> DISCLAIMER: </strong> The author doesn't intend to be expert on the problems. While these notes will solve your problem at hand, it is always advised to dig deep to the problem if one is interested and also share
your further learnings in the comments below as well.</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://prakharmishra.com/tag/design-patterns.html">design-patterns</a>
      <a href="https://prakharmishra.com/tag/python.html">python</a>
      <a href="https://prakharmishra.com/tag/interviews.html">interviews</a>
      <a href="https://prakharmishra.com/tag/object-oriented-programming.html">object-oriented-programming</a>
    </p>
  </div>




    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="ca-pub-8793729856692815"
         data-ad-slot="1234566"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

</article>

    <footer>
<p>&copy; 2021 </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
  <span class="footer-separator">|</span>
  Switch to the <a href="javascript:void(0)" onclick="theme.switch(`dark`)">dark</a> | <a href="javascript:void(0)" onclick="theme.switch(`light`)">light</a> | <a href="javascript:void(0)" onclick="theme.switch(`browser`)">browser</a> theme
  <script id="dark-theme-script"
          src="https://prakharmishra.com/theme/dark-theme/dark-theme.min.js"
          data-enable-auto-detect-theme="True"
          data-default-theme="dark"
          type="text/javascript">
  </script>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Prakhar Mishra ",
  "url" : "https://prakharmishra.com",
  "image": "/images/prakhar.jpeg",
  "description": "Foo Bar's Thoughts and Writings"
}
</script>

    <script>
      $(document).ready(function() {
        $('#tipue_search_input').tipuesearch();
      });
    </script>

</body>
</html>