
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://prakharmishra.com/theme/stylesheet/style.min.css">

    <link id="dark-theme-style" rel="stylesheet" type="text/css"
          media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)"
    href="https://prakharmishra.com/theme/stylesheet/dark-theme.min.css">

    <link id="pygments-dark-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)"
          href="https://prakharmishra.com/theme/pygments/monokai.min.css">
    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: light)"
          href="https://prakharmishra.com/theme/pygments/emacs.min.css">

    <script src="https://prakharmishra.com/theme/tipuesearch/jquery.min.js"></script>
    <script src="https://prakharmishra.com/theme/tipuesearch/tipuesearch.min.js"></script>
    <script src="https://prakharmishra.com/theme/tipuesearch/tipuesearch.min.js"></script>
    <script src="https://prakharmishra.com/theme/tipuesearch/tipuesearch_set.min.js"></script>
    <script src="https://prakharmishra.com/tipuesearch_content.js"></script>
    <link rel="stylesheet" href="https://prakharmishra.com/theme/tipuesearch/tipuesearch.min.css" />

  <link rel="stylesheet" type="text/css" href="https://prakharmishra.com/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://prakharmishra.com/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://prakharmishra.com/theme/font-awesome/css/solid.css">


    <link href="https://prakharmishra.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Prakhar Mishra Atom">

    <link href="https://prakharmishra.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Prakhar Mishra RSS">


<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-191819273-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

<meta name="author" content="Prakhar Mishra" />
<meta name="description" content="Composite pattern code implementation using c++" />
<meta name="keywords" content="design-patterns, c++, interviews, object-oriented-programming">


<meta property="og:site_name" content="Prakhar Mishra"/>
<meta property="og:title" content="Design Patterns - Composite Pattern Implementation Using C++"/>
<meta property="og:description" content="Composite pattern code implementation using c++"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://prakharmishra.com/articles/composite-pattern-using-cpp.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2021-03-17 00:00:00+05:30"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://prakharmishra.com/author/prakhar-mishra.html">
<meta property="article:section" content="programming"/>
<meta property="article:tag" content="design-patterns"/>
<meta property="article:tag" content="c++"/>
<meta property="article:tag" content="interviews"/>
<meta property="article:tag" content="object-oriented-programming"/>
<meta property="og:image" content="/images/prakhar.jpeg">

  <title>Prakhar Mishra &ndash; Design Patterns - Composite Pattern Implementation Using C++</title>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-8793729856692815",
      enable_page_level_ads: true
    });
  </script>
</head>
<body >
  <aside>
    <div>
      <a href="https://prakharmishra.com">
        <img src="/images/prakhar.jpeg" alt="Prakhar Mishra" title="Prakhar Mishra">
      </a>

      <h1>
        <a href="https://prakharmishra.com">Prakhar Mishra</a>
      </h1>

<p>Software Engineer</p>
        <form class="navbar-search" action="/search.html" role="search">
          <input type="text" name="q" id="tipue_search_input" placeholder="Search...">
        </form>

      <nav>
        <ul class="list">



            <li>
              <a target="_self" href="/" >Home</a>
            </li>
            <li>
              <a target="_self" href="/categories.html" >Categories</a>
            </li>
            <li>
              <a target="_self" href="/tags.html" >Tags</a>
            </li>
            <li>
              <a target="_self" href="/pages/About.html" >About</a>
            </li>
            <li>
              <a target="_self" href="/pages/Contact.html" >Contact</a>
            </li>
        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-linkedin" href="https://www.linkedin.com/in/prakhar1467-11" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
          <li>
            <a  class="sc-github" href="https://github.com/tst07" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-youtube" href="https://www.youtube.com/channel/UC4J1E1YPJy8PH0F1rnOaYfQ" target="_blank">
              <i class="fab fa-youtube"></i>
            </a>
          </li>
          <li>
            <a  class="sc-instagram" href="https://www.instagram.com/prakhar1467" target="_blank">
              <i class="fab fa-instagram"></i>
            </a>
          </li>
      </ul>
    </div>

      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-aside"
           data-ad-client="ca-pub-8793729856692815"
           data-ad-slot="1234561"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
  </aside>
  <main>

    <nav>
      <a href="https://prakharmishra.com">Home</a>

      <a href="/category/programming.html">Code</a>
      <a href="/category/life.html">Life</a>
      <a href="/category/music.html">Music</a>
      <a href="/archives.html">Archives</a>

      <a href="https://prakharmishra.com/feeds/all.atom.xml">Atom</a>

      <a href="https://prakharmishra.com/feeds/all.rss.xml">RSS</a>
    </nav>

<article class="single">
  <header>
      
    <h1 id="composite-pattern-using-cpp">Design Patterns - Composite Pattern Implementation Using C++</h1>
    <p>
      Posted on 3æœˆ 17 2021 in <a href="https://prakharmishra.com/category/programming.html">programming</a>

    </p>
  </header>


  <div>
    <p>We have already covered composite pattern implementation using python in a separate blog. </p>
<p>In this blog, let's checkout how we can code using c++. We are implementing something similar to the linux file tree. 
Now let's get to the implementation. First we will create <code>filesystem.h</code> file where our pattern implementation will live:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="cpf">&lt;list&gt;</span><span class="cp"></span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>


<span class="k">class</span> <span class="nc">IFileSystem</span> <span class="p">{</span>
<span class="k">protected</span><span class="o">:</span>
    <span class="n">string</span> <span class="n">name</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">IFileSystem</span><span class="p">(</span><span class="n">string</span> <span class="n">fname</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">fname</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">display</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">operation</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">addChild</span><span class="p">(</span><span class="n">IFileSystem</span> <span class="o">*</span><span class="n">fs</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//</span>
    <span class="p">}</span>

    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">removeChild</span><span class="p">(</span><span class="n">IFileSystem</span> <span class="o">*</span><span class="n">fs</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//</span>
    <span class="p">}</span>

<span class="p">};</span>


<span class="k">class</span> <span class="nc">Dir</span><span class="o">:</span> <span class="k">public</span> <span class="n">IFileSystem</span> <span class="p">{</span>
<span class="k">protected</span><span class="o">:</span>
    <span class="n">list</span><span class="o">&lt;</span><span class="n">IFileSystem</span> <span class="o">*&gt;</span> <span class="n">children</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">Dir</span><span class="p">(</span><span class="n">string</span> <span class="n">fname</span><span class="p">)</span><span class="o">:</span> <span class="n">IFileSystem</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">display</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">name</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">operation</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">display</span><span class="p">();</span>
        <span class="k">for</span><span class="p">(</span><span class="n">list</span><span class="o">&lt;</span><span class="n">IFileSystem</span><span class="o">*&gt;::</span><span class="n">iterator</span> <span class="n">it</span> <span class="o">=</span>  <span class="n">children</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">children</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">it</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">operation</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">addChild</span><span class="p">(</span><span class="n">IFileSystem</span> <span class="o">*</span><span class="n">fs</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">children</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">fs</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">removeChild</span><span class="p">(</span><span class="n">IFileSystem</span> <span class="o">*</span><span class="n">fs</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">list</span><span class="o">&lt;</span><span class="n">IFileSystem</span><span class="o">*&gt;::</span><span class="n">iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">find</span><span class="p">(</span><span class="n">children</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">children</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">fs</span><span class="p">);</span>
        <span class="n">children</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">it</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>


<span class="k">class</span> <span class="nc">LeafFile</span><span class="o">:</span> <span class="k">public</span> <span class="n">IFileSystem</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">LeafFile</span><span class="p">(</span><span class="n">string</span> <span class="n">fname</span><span class="p">)</span><span class="o">:</span> <span class="n">IFileSystem</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">display</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">name</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">operation</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">display</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div>

<p>Now, Let's create a <code>main.cpp</code> file to make use of our design pattern:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;filesystem.h&quot;</span><span class="cp"></span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">IFileSystem</span> <span class="o">*</span><span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Dir</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">);</span>

    <span class="n">IFileSystem</span> <span class="o">*</span><span class="n">home</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Dir</span><span class="p">(</span><span class="s">&quot;/home&quot;</span><span class="p">);</span>
    <span class="n">IFileSystem</span> <span class="o">*</span><span class="n">leafFile</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LeafFile</span><span class="p">(</span><span class="s">&quot;myfile&quot;</span><span class="p">);</span>
    <span class="n">home</span><span class="o">-&gt;</span><span class="n">addChild</span><span class="p">(</span><span class="n">leafFile</span><span class="p">);</span>

    <span class="n">IFileSystem</span> <span class="o">*</span><span class="n">etc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Dir</span><span class="p">(</span><span class="s">&quot;/etc&quot;</span><span class="p">);</span>
    <span class="n">IFileSystem</span> <span class="o">*</span><span class="n">var</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Dir</span><span class="p">(</span><span class="s">&quot;/var&quot;</span><span class="p">);</span>
    <span class="n">IFileSystem</span> <span class="o">*</span><span class="n">lib</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Dir</span><span class="p">(</span><span class="s">&quot;/lib&quot;</span><span class="p">);</span>

    <span class="n">root</span><span class="o">-&gt;</span><span class="n">addChild</span><span class="p">(</span><span class="n">home</span><span class="p">);</span>
    <span class="n">root</span><span class="o">-&gt;</span><span class="n">addChild</span><span class="p">(</span><span class="n">etc</span><span class="p">);</span>
    <span class="n">root</span><span class="o">-&gt;</span><span class="n">addChild</span><span class="p">(</span><span class="n">var</span><span class="p">);</span>
    <span class="n">root</span><span class="o">-&gt;</span><span class="n">addChild</span><span class="p">(</span><span class="n">lib</span><span class="p">);</span>

    <span class="n">root</span><span class="o">-&gt;</span><span class="n">operation</span><span class="p">();</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>This was my implementation of linux file tree using c++, Try to run this on your machine and do tweaks and extensions as per your imagination.
I will see you in the next one!</p>
<p><strong> Related Links </strong></p>
<p><a href="https://prakharmishra.com/articles/composite-pattern-using-python.html#composite-pattern-using-python">Design Patterns - Composite Pattern Implementation Using Python</a></p>
<hr>
<p><strong> DISCLAIMER: </strong> The author doesn't intend to be expert on the problems. While these notes will solve your problem at hand, it is always advised to dig deep to the problem if one is interested and also share
your further learnings in the comments below as well.</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://prakharmishra.com/tag/design-patterns.html">design-patterns</a>
      <a href="https://prakharmishra.com/tag/c.html">c++</a>
      <a href="https://prakharmishra.com/tag/interviews.html">interviews</a>
      <a href="https://prakharmishra.com/tag/object-oriented-programming.html">object-oriented-programming</a>
    </p>
  </div>




    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="ca-pub-8793729856692815"
         data-ad-slot="1234566"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

</article>

    <footer>
<p>&copy; 2021 </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
  <span class="footer-separator">|</span>
  Switch to the <a href="javascript:void(0)" onclick="theme.switch(`dark`)">dark</a> | <a href="javascript:void(0)" onclick="theme.switch(`light`)">light</a> | <a href="javascript:void(0)" onclick="theme.switch(`browser`)">browser</a> theme
  <script id="dark-theme-script"
          src="https://prakharmishra.com/theme/dark-theme/dark-theme.min.js"
          data-enable-auto-detect-theme="True"
          data-default-theme="dark"
          type="text/javascript">
  </script>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Prakhar Mishra ",
  "url" : "https://prakharmishra.com",
  "image": "/images/prakhar.jpeg",
  "description": "Foo Bar's Thoughts and Writings"
}
</script>

    <script>
      $(document).ready(function() {
        $('#tipue_search_input').tipuesearch();
      });
    </script>

</body>
</html>